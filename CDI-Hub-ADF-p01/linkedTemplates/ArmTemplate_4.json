{
	"$schema": "http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
	"contentVersion": "1.0.0.0",
	"parameters": {
		"factoryName": {
			"type": "string",
			"metadata": "Data Factory 이름",
			"defaultValue": "CDI-Hub-ADF-p01"
		}
	},
	"variables": {
		"factoryId": "[concat('Microsoft.DataFactory/factories/', parameters('factoryName'))]"
	},
	"resources": [
		{
			"name": "[concat(parameters('factoryName'), '/DTS_API_KOSIS')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "HttpServer1_P11",
					"type": "LinkedServiceReference"
				},
				"parameters": {
					"url": {
						"type": "string"
					}
				},
				"annotations": [],
				"type": "Json",
				"typeProperties": {
					"location": {
						"type": "HttpServerLocation",
						"relativeUrl": {
							"value": "@dataset().url",
							"type": "Expression"
						}
					}
				},
				"schema": {}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/DTS_API_LOCAL_XML')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "HttpServer1_P16",
					"type": "LinkedServiceReference"
				},
				"parameters": {
					"url": {
						"type": "string"
					}
				},
				"annotations": [],
				"type": "Xml",
				"typeProperties": {
					"location": {
						"type": "HttpServerLocation",
						"relativeUrl": {
							"value": "@dataset().url",
							"type": "Expression"
						}
					},
					"nullValue": "''"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/DTS_API_MAFRA')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"description": "농림축산식품",
				"linkedServiceName": {
					"referenceName": "HttpServer1_P10",
					"type": "LinkedServiceReference"
				},
				"parameters": {
					"url": {
						"type": "string"
					}
				},
				"annotations": [],
				"type": "Json",
				"typeProperties": {
					"location": {
						"type": "HttpServerLocation",
						"relativeUrl": {
							"value": "@dataset().url",
							"type": "Expression"
						}
					}
				},
				"schema": {}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/DTS_API_MND')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "HttpServer1_P03",
					"type": "LinkedServiceReference"
				},
				"parameters": {
					"url": {
						"type": "string"
					}
				},
				"annotations": [],
				"type": "Json",
				"typeProperties": {
					"location": {
						"type": "HttpServerLocation",
						"relativeUrl": {
							"value": "@dataset().url",
							"type": "Expression"
						}
					}
				},
				"schema": {}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/DTS_API_SGIS')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "HttpServer1_P04",
					"type": "LinkedServiceReference"
				},
				"parameters": {
					"url": {
						"type": "string"
					}
				},
				"annotations": [],
				"type": "Json",
				"typeProperties": {
					"location": {
						"type": "HttpServerLocation",
						"relativeUrl": {
							"value": "@dataset().url",
							"type": "Expression"
						}
					}
				},
				"schema": {}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/DTS_BO_MEMBER_MST_D1')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "LKS_ADLS_P02",
					"type": "LinkedServiceReference"
				},
				"folder": {
					"name": "Source/베스트온"
				},
				"annotations": [],
				"type": "DelimitedText",
				"typeProperties": {
					"location": {
						"type": "AzureBlobFSLocation",
						"fileName": {
							"value": "@concat('M_CD_MART.BO_MEMBER_V_',addToTime(addHours(utcNow(), 9),-1,'Day', 'yyyyMMdd'), '.csv')",
							"type": "Expression"
						},
						"folderPath": "고객/내부/베스트온회원",
						"fileSystem": "cdi-root"
					},
					"columnDelimiter": ",",
					"escapeChar": "\\",
					"firstRowAsHeader": true,
					"quoteChar": "\""
				},
				"schema": [
					{
						"name": "memno",
						"type": "String"
					},
					{
						"name": "approvaldt",
						"type": "String"
					},
					{
						"name": "memberfl",
						"type": "String"
					},
					{
						"name": "sexfl",
						"type": "String"
					},
					{
						"name": "birthdt",
						"type": "String"
					},
					{
						"name": "zipcode",
						"type": "String"
					},
					{
						"name": "maillingfl",
						"type": "String"
					},
					{
						"name": "smsfl",
						"type": "String"
					},
					{
						"name": "entrypath",
						"type": "String"
					},
					{
						"name": "logincnt",
						"type": "String"
					},
					{
						"name": "lastlogindt",
						"type": "String"
					}
				]
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/DTS_BO_MEMBER_MST_D2')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "LKS_ADLS_P02",
					"type": "LinkedServiceReference"
				},
				"folder": {
					"name": "Source/베스트온"
				},
				"annotations": [],
				"type": "DelimitedText",
				"typeProperties": {
					"location": {
						"type": "AzureBlobFSLocation",
						"fileName": {
							"value": "@concat('M_CD_MART.BO_MEMBER_V_',addToTime(addHours(utcNow(), 9),-2,'Day', 'yyyyMMdd'), '.csv')",
							"type": "Expression"
						},
						"folderPath": "고객/내부/베스트온회원",
						"fileSystem": "cdi-root"
					},
					"columnDelimiter": ",",
					"escapeChar": "\\",
					"firstRowAsHeader": true,
					"quoteChar": "\""
				},
				"schema": [
					{
						"name": "memno",
						"type": "String"
					},
					{
						"name": "approvaldt",
						"type": "String"
					},
					{
						"name": "memberfl",
						"type": "String"
					},
					{
						"name": "sexfl",
						"type": "String"
					},
					{
						"name": "birthdt",
						"type": "String"
					},
					{
						"name": "zipcode",
						"type": "String"
					},
					{
						"name": "maillingfl",
						"type": "String"
					},
					{
						"name": "smsfl",
						"type": "String"
					},
					{
						"name": "entrypath",
						"type": "String"
					},
					{
						"name": "logincnt",
						"type": "String"
					},
					{
						"name": "lastlogindt",
						"type": "String"
					}
				]
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/DTS_DATA_BACKUP_CVS')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "LKS_ADLS_P01",
					"type": "LinkedServiceReference"
				},
				"parameters": {
					"AdlsDirectory": {
						"type": "string"
					},
					"FileName": {
						"type": "string"
					}
				},
				"annotations": [],
				"type": "DelimitedText",
				"typeProperties": {
					"location": {
						"type": "AzureBlobFSLocation",
						"fileName": {
							"value": "@dataset().FileName",
							"type": "Expression"
						},
						"folderPath": {
							"value": "@dataset().AdlsDirectory",
							"type": "Expression"
						},
						"fileSystem": "cdi-root"
					},
					"columnDelimiter": ",",
					"compressionCodec": null,
					"compressionLevel": "Fastest",
					"escapeChar": "\\",
					"firstRowAsHeader": true,
					"quoteChar": "\""
				},
				"schema": []
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/DTS_JWES_CONTENTS')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "LKS_ADLS_P02",
					"type": "LinkedServiceReference"
				},
				"annotations": [],
				"type": "DelimitedText",
				"typeProperties": {
					"location": {
						"type": "AzureBlobFSLocation",
						"fileName": "M_CD_JWES.CUSTOMERVIEWS.csv",
						"folderPath": "고객/내부/정원e샵상품후기",
						"fileSystem": "cdi-root"
					},
					"columnDelimiter": ",",
					"escapeChar": "\\",
					"firstRowAsHeader": true,
					"quoteChar": "\""
				},
				"schema": [
					{
						"name": "SEQ_NO",
						"type": "String"
					},
					{
						"name": "PK",
						"type": "String"
					},
					{
						"name": "HEADLINE",
						"type": "String"
					},
					{
						"name": "CONTENTS",
						"type": "String"
					},
					{
						"name": "P_CODE",
						"type": "String"
					},
					{
						"name": "P_RATING",
						"type": "String"
					},
					{
						"name": "ORDERNUMBER",
						"type": "String"
					},
					{
						"name": "CRTDT",
						"type": "String"
					},
					{
						"name": "MODDT",
						"type": "String"
					}
				]
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/DTS_JW_LOGIN_STAT')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "LKS_ADLS_P02",
					"type": "LinkedServiceReference"
				},
				"folder": {
					"name": "Source/정원e샵"
				},
				"annotations": [],
				"type": "DelimitedText",
				"typeProperties": {
					"location": {
						"type": "AzureBlobFSLocation",
						"fileName": "M_CD_MART.JW_LOGINSTAT.csv",
						"folderPath": "고객/내부/정원e샵회원(하이브리스)",
						"fileSystem": "cdi-root"
					},
					"columnDelimiter": ",",
					"escapeChar": "\\",
					"firstRowAsHeader": true,
					"quoteChar": "\""
				},
				"schema": [
					{
						"name": "USER_PK",
						"type": "String"
					},
					{
						"name": "SUMLOGIN_1W",
						"type": "String"
					},
					{
						"name": "SUMLOGIN_1M",
						"type": "String"
					},
					{
						"name": "SUMLOGIN_3M",
						"type": "String"
					},
					{
						"name": "LOGINCNT",
						"type": "String"
					},
					{
						"name": "LASTLOGINDATE",
						"type": "String"
					}
				]
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/DTS_JW_MEMBER_MST_D1')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "LKS_ADLS_P02",
					"type": "LinkedServiceReference"
				},
				"folder": {
					"name": "Source/정원e샵"
				},
				"annotations": [],
				"type": "DelimitedText",
				"typeProperties": {
					"location": {
						"type": "AzureBlobFSLocation",
						"fileName": {
							"value": "@concat('M_CD_MART.JW_USERS_',addToTime(addHours(utcNow(), 9),-1,'Day', 'yyyyMMdd'), '.csv')",
							"type": "Expression"
						},
						"folderPath": "고객/내부/정원e샵회원(하이브리스)",
						"fileSystem": "cdi-root"
					},
					"columnDelimiter": ",",
					"escapeChar": "\\",
					"firstRowAsHeader": true,
					"quoteChar": "\""
				},
				"schema": [
					{
						"name": "pk",
						"type": "String"
					},
					{
						"name": "reg_dt",
						"type": "String"
					},
					{
						"name": "member_gbn",
						"type": "String"
					},
					{
						"name": "sex",
						"type": "String"
					},
					{
						"name": "birth",
						"type": "String"
					},
					{
						"name": "zipcode",
						"type": "String"
					},
					{
						"name": "company",
						"type": "String"
					},
					{
						"name": "mktfl",
						"type": "String"
					},
					{
						"name": "emailfl",
						"type": "String"
					},
					{
						"name": "phonefl",
						"type": "String"
					},
					{
						"name": "mailfl",
						"type": "String"
					},
					{
						"name": "smsfl",
						"type": "String"
					},
					{
						"name": "appushfl",
						"type": "String"
					}
				]
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/DTS_JW_MEMBER_MST_D2')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "LKS_ADLS_P02",
					"type": "LinkedServiceReference"
				},
				"folder": {
					"name": "Source/정원e샵"
				},
				"annotations": [],
				"type": "DelimitedText",
				"typeProperties": {
					"location": {
						"type": "AzureBlobFSLocation",
						"fileName": {
							"value": "@concat('M_CD_MART.JW_USERS_',addToTime(addHours(utcNow(), 9),-2,'Day', 'yyyyMMdd'), '.csv')",
							"type": "Expression"
						},
						"folderPath": "고객/내부/정원e샵회원(하이브리스)",
						"fileSystem": "cdi-root"
					},
					"columnDelimiter": ",",
					"escapeChar": "\\",
					"firstRowAsHeader": true,
					"quoteChar": "\""
				},
				"schema": [
					{
						"name": "pk",
						"type": "String"
					},
					{
						"name": "reg_dt",
						"type": "String"
					},
					{
						"name": "member_gbn",
						"type": "String"
					},
					{
						"name": "sex",
						"type": "String"
					},
					{
						"name": "birth",
						"type": "String"
					},
					{
						"name": "zipcode",
						"type": "String"
					},
					{
						"name": "company",
						"type": "String"
					},
					{
						"name": "mktfl",
						"type": "String"
					},
					{
						"name": "emailfl",
						"type": "String"
					},
					{
						"name": "phonefl",
						"type": "String"
					},
					{
						"name": "mailfl",
						"type": "String"
					},
					{
						"name": "smsfl",
						"type": "String"
					},
					{
						"name": "appushfl",
						"type": "String"
					}
				]
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/DTS_NAVER_API')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "HttpServer1_p13",
					"type": "LinkedServiceReference"
				},
				"parameters": {
					"params": {
						"type": "string"
					}
				},
				"folder": {
					"name": "Source"
				},
				"annotations": [],
				"type": "Json",
				"typeProperties": {
					"location": {
						"type": "HttpServerLocation",
						"relativeUrl": {
							"value": "@dataset().params",
							"type": "Expression"
						}
					}
				},
				"schema": {}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/DTS_NAVER_API_XML')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"description": "HTTP_XML형식 REQ\n기상청 OpenAPI서비스 기준으로 생성\n분류 필요 시 추가생성 필요",
				"linkedServiceName": {
					"referenceName": "HttpServer1_p13",
					"type": "LinkedServiceReference"
				},
				"parameters": {
					"params": {
						"type": "string"
					}
				},
				"folder": {
					"name": "Source"
				},
				"annotations": [],
				"type": "Xml",
				"typeProperties": {
					"location": {
						"type": "HttpServerLocation",
						"relativeUrl": {
							"value": "@dataset().params\n",
							"type": "Expression"
						}
					}
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/DTS_NIELSEN_SNK')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"description": "닐슨 압축파일해제",
				"linkedServiceName": {
					"referenceName": "LKS_ADLS_P01",
					"type": "LinkedServiceReference"
				},
				"parameters": {
					"yyyymm": {
						"type": "string"
					},
					"dir": {
						"type": "string"
					}
				},
				"folder": {
					"name": "Sink"
				},
				"annotations": [],
				"type": "Binary",
				"typeProperties": {
					"location": {
						"type": "AzureBlobFSLocation",
						"folderPath": {
							"value": "@concat(dataset().dir,'/',dataset().yyyymm)",
							"type": "Expression"
						},
						"fileSystem": "cdi-root"
					}
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/DTS_POSTGRESQL_SNK_P02')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "LKS_PG_P02",
					"type": "LinkedServiceReference"
				},
				"parameters": {
					"SinkSchema": {
						"type": "string"
					},
					"SinkTable": {
						"type": "string"
					}
				},
				"folder": {
					"name": "Sink/PostgreSQL"
				},
				"annotations": [],
				"type": "AzurePostgreSqlTable",
				"schema": [],
				"typeProperties": {
					"schema": {
						"value": "@toLower(dataset().SinkSchema)",
						"type": "Expression"
					},
					"table": {
						"value": "@toLower(dataset().SinkTable)",
						"type": "Expression"
					}
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/DTS_RSN_STORE_REVIEW_INC')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "LKS_ADLS_P02",
					"type": "LinkedServiceReference"
				},
				"parameters": {
					"AdlsDirectory": {
						"type": "string"
					},
					"FileName": {
						"type": "string"
					}
				},
				"folder": {
					"name": "Dataflow"
				},
				"annotations": [],
				"type": "DelimitedText",
				"typeProperties": {
					"location": {
						"type": "AzureBlobFSLocation",
						"fileName": {
							"value": "@dataset().FileName",
							"type": "Expression"
						},
						"folderPath": {
							"value": "@dataset().AdlsDirectory",
							"type": "Expression"
						},
						"fileSystem": "cdi-root"
					},
					"columnDelimiter": ",",
					"escapeChar": "\\",
					"firstRowAsHeader": true,
					"nullValue": "\"none\"",
					"quoteChar": "\""
				},
				"schema": [
					{
						"name": "srd_id",
						"type": "String"
					},
					{
						"name": "sd_reviewid",
						"type": "String"
					},
					{
						"name": "site",
						"type": "String"
					},
					{
						"name": "site_id",
						"type": "String"
					},
					{
						"name": "srd_title",
						"type": "String"
					},
					{
						"name": "srd_content",
						"type": "String"
					},
					{
						"name": "srd_writer",
						"type": "String"
					},
					{
						"name": "srd_writetime",
						"type": "String"
					},
					{
						"name": "srd_rate",
						"type": "String"
					},
					{
						"name": "srd_crawl_time",
						"type": "String"
					}
				]
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/DTS_RSN_STORE_REVIEW_INC_sungun')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "LKS_ADLS_P02",
					"type": "LinkedServiceReference"
				},
				"folder": {
					"name": "Dataflow"
				},
				"annotations": [],
				"type": "DelimitedText",
				"typeProperties": {
					"location": {
						"type": "AzureBlobFSLocation",
						"fileSystem": "cdi-root"
					},
					"columnDelimiter": ",",
					"escapeChar": "\\",
					"firstRowAsHeader": true,
					"nullValue": "\"none\"",
					"quoteChar": "\""
				},
				"schema": [
					{
						"name": "srd_id",
						"type": "String"
					},
					{
						"name": "sd_reviewid",
						"type": "String"
					},
					{
						"name": "site",
						"type": "String"
					},
					{
						"name": "site_id",
						"type": "String"
					},
					{
						"name": "srd_title",
						"type": "String"
					},
					{
						"name": "srd_content",
						"type": "String"
					},
					{
						"name": "srd_writer",
						"type": "String"
					},
					{
						"name": "srd_writetime",
						"type": "String"
					},
					{
						"name": "srd_rate",
						"type": "String"
					},
					{
						"name": "srd_crawl_time",
						"type": "String"
					}
				]
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/DTS_RSN_STORE_REVIEW_M')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "LKS_ADLS_P02",
					"type": "LinkedServiceReference"
				},
				"folder": {
					"name": "Dataflow"
				},
				"annotations": [],
				"type": "DelimitedText",
				"typeProperties": {
					"location": {
						"type": "AzureBlobFSLocation",
						"fileSystem": "cdi-root"
					},
					"columnDelimiter": ",",
					"escapeChar": "\\",
					"firstRowAsHeader": true,
					"nullValue": "\"none\"",
					"quoteChar": "\""
				},
				"schema": [
					{
						"name": "srd_id",
						"type": "String"
					},
					{
						"name": "sd_reviewid",
						"type": "String"
					},
					{
						"name": "site",
						"type": "String"
					},
					{
						"name": "site_id",
						"type": "String"
					},
					{
						"name": "srd_title",
						"type": "String"
					},
					{
						"name": "srd_content",
						"type": "String"
					},
					{
						"name": "srd_writer",
						"type": "String"
					},
					{
						"name": "srd_writetime",
						"type": "String"
					},
					{
						"name": "srd_rate",
						"type": "String"
					},
					{
						"name": "srd_crawl_time",
						"type": "String"
					}
				]
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/DTS_SNK_PG_BO_CONTENTS')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "LKS_ADLS_P02",
					"type": "LinkedServiceReference"
				},
				"annotations": [],
				"type": "DelimitedText",
				"typeProperties": {
					"location": {
						"type": "AzureBlobFSLocation",
						"fileName": "M_CD_BESTON.ES_PLUSREVIEWARTICLE.csv",
						"folderPath": "고객/내부/베스트온상품후기",
						"fileSystem": "cdi-root"
					},
					"columnDelimiter": ",",
					"escapeChar": "\\",
					"firstRowAsHeader": true,
					"quoteChar": "\""
				},
				"schema": [
					{
						"name": "SNO",
						"type": "String"
					},
					{
						"name": "CHANNEL",
						"type": "String"
					},
					{
						"name": "CONTENTS",
						"type": "String"
					},
					{
						"name": "GOODSNO",
						"type": "String"
					},
					{
						"name": "ORDERGOODSNO",
						"type": "String"
					},
					{
						"name": "REGDT",
						"type": "String"
					},
					{
						"name": "MODDT",
						"type": "String"
					},
					{
						"name": "GOODSCD",
						"type": "String"
					}
				]
			},
			"dependsOn": []
		}
	]
}